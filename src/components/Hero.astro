---
import { getLandingPageData } from '../lib/api';
import HeroContent from './HeroContent.jsx';

const data = await getLandingPageData();

// Fallback values in case Sanity is empty initially
const heroTitle = data?.heroTitle || "Experiencia Inmobiliaria";
const heroSubtitle = data?.heroSubtitle || "Descubre propiedades exclusivas con un servicio personalizado.";
const ctaText = data?.ctaText || "Cont√°ctanos";
const ctaLink = data?.ctaLink || "/contacto";
const videoUrl = data?.videoFile || data?.heroVideoUrl;
---

<section class="relative h-screen w-full overflow-hidden">
  {/* Background Video */}
  {videoUrl ? (
    <video
      autoplay
      loop
      muted
      playsinline
      class="absolute top-0 left-0 w-full h-full object-cover -z-10"
    >
      <source src={videoUrl} type="video/mp4" />
      Your browser does not support the video tag.
    </video>
  ) : (
    <div class="absolute top-0 left-0 w-full h-full bg-brand-dark -z-10 flex items-center justify-center">
      <p class="text-white/50">No video configured</p>
    </div>
  )}

  {/* Overlay */}
  <div class="absolute top-0 left-0 w-full h-full bg-brand-black/40 -z-10"></div>

  {/* Content (Animated) */}
  <HeroContent 
    heroTitle={heroTitle}
    heroSubtitle={heroSubtitle}
    ctaText={ctaText}
    ctaLink={ctaLink}
    client:load
  />
</section>
